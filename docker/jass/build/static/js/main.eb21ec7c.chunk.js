(this.webpackJsonpjass=this.webpackJsonpjass||[]).push([[0],{53:function(e,t,n){e.exports=n.p+"static/media/jasstafel.0c30ab70.jpg"},65:function(e,t,n){e.exports=n(77)},70:function(e,t,n){},71:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),s=(n(70),n(71),n(34)),m=n(20),c=n(9),u=n(115);var l=function(e){var t=e.rounds,n=t[0].pointsPerTeamPerRound[0].team,a=t[0].pointsPerTeamPerRound[1].team,r=0,i=0;return t.forEach((function(e){for(var t=0;t<2;t++){var o=e.pointsPerTeamPerRound[t].team.name;n.name===o?(r+=e.pointsPerTeamPerRound[t].points,r+=e.pointsPerTeamPerRound[t].wiisPoints):a.name===o?(i+=e.pointsPerTeamPerRound[t].points,i+=e.pointsPerTeamPerRound[t].wiisPoints):console.log("Team does not exist: "+o)}})),{team1:{team:n,points:r},team2:{team:a,points:i}}},d=n(121),p=n(120);function f(e){return r.a.createElement("div",{className:"viewWrapper"},e.children)}var h=n(119);function b(e){return r.a.createElement("div",{className:"dashboardCardWrapper"},r.a.createElement("h3",null,e.gameTitle),r.a.createElement("div",{className:"dashboardCardInnerWrapper"},r.a.createElement("div",null,r.a.createElement("p",null,e.teamOne)),r.a.createElement("div",null,r.a.createElement("p",null,e.pointsTeamOne))),r.a.createElement("div",{className:"dashboardCardInnerWrapper"},r.a.createElement("div",null,r.a.createElement("p",null,e.teamTwo)),r.a.createElement("div",null,r.a.createElement("p",null,e.pointsTeamTwo))))}var v=Object(m.g)((function(e){var t=Object(a.useState)(!0),n=Object(c.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)(),m=Object(c.a)(s,2),v=m[0],w=m[1],E=Object(a.useState)([]),g=Object(c.a)(E,2),j=g[0],O=g[1];return Object(a.useEffect)((function(){o(!0),fetch("/v1/game",{method:"GET"}).then((function(e){if(!e.ok)throw new Error("Error during game loading, please try again!");e.json().then((function(e){O(e),o(!1)}))})).catch((function(e){w({message:e.message,error:e}),o(!1)}))}),[o,O,w]),r.a.createElement(f,null,r.a.createElement("h1",null,"Dashboard"),r.a.createElement("h2",null,"Games"),i?r.a.createElement(p.a,null):v?r.a.createElement("p",null,"error: ",v.message):r.a.createElement(u.a,{container:!0,spacing:10,direction:"row",justify:"center","align-items":"center"},j.map((function(t){var n=l(t);return r.a.createElement(u.a,{item:!0,xs:12,md:6,lg:3,key:t.id},r.a.createElement(h.a,{onClick:function(){e.history.push("/game/"+t.id)}},r.a.createElement(b,{gameTitle:t.id,teamOne:n.team1.team.name,pointsTeamOne:n.team1.points,teamTwo:n.team2.team.name,pointsTeamTwo:n.team2.points})))})),r.a.createElement(u.a,{item:!0,xs:12,md:4,lg:2},r.a.createElement(d.a,{onClick:function(){e.history.push("/game/create")}},"+ Game"))))}));var w=function(){return r.a.createElement(f,null,r.a.createElement("h1",null,"Users"))},E=n(124),g=n(125),j=n(22),O=n.n(j),T=n(32),P=n(37),k=n(25),x=function(){function e(t,n,a){Object(P.a)(this,e),this.canvas=void 0,this.game=void 0,this.jasstafel=void 0,this.canvas=t,this.game=n,this.jasstafel=a}return Object(k.a)(e,[{key:"loadImage",value:function(){var e=this;return new Promise((function(t){var n=new Image(515,720);n.src=e.jasstafel,t(n)}))}},{key:"renderDefaultBoard",value:function(){var e=this;return this.loadImage().then((function(t){return new Promise((function(n,a){if(e.canvas.current){var r=e.canvas.current.getContext("2d");t&&(t.onload=function(){r&&(r.drawImage(t,0,0),n(r))})}}))}))}},{key:"drawPoints",value:function(e,t,n,a,r){var i=function(e){a.beginPath(),a.lineWidth=3,a.strokeStyle="white",e(),a.stroke()},o=function(e,t){i((function(){a.moveTo(e-6,t+15),a.lineTo(e+24,t-15)}))},s=function(e,t){i((function(){a.moveTo(e,t-15),a.lineTo(e,t+15)}))},m=function(e,t,n){i((function(){n?(a.moveTo(e,t-15),a.lineTo(5+e,t+15)):(a.moveTo(e+5,t-15),a.lineTo(e,t+15))}))};e+=n.team1,t+=n.team2;for(var c=Math.floor(e/100),u=Math.floor(e%100/50),l=Math.floor(e%100%50/20),d=e-100*c-50*u-20*l,p=Math.floor(t/100),f=Math.floor(t%100/50),h=Math.floor(t%100%50/20),b=t-100*p-50*f-20*h,v=[c,u,l,p,f,h],w=[115,255,297,405,545,587],E=[r.oneT,r.oneM,r.oneB,r.twoT,r.twoM,r.twoB],g=0;g<6;g++){for(var j=v[g],O=w[g],T=E[g];j>0;){if(1!==g&&4!==g){(T+1)%5===0&&0!==T?o(130+6*(T-4),O):s(130+6*T,O)}else{var P=Math.floor(T/2);m(170+17*P,O-12*P,T%2===0)}T++,E[g]++,j--}r.oneT=E[0],r.oneM=E[1],r.oneB=E[2],r.twoT=E[3],r.twoM=E[4],r.twoB=E[5]}return{team1:Number(d),team2:Number(b),pointsDrawn:r}}},{key:"drawRest",value:function(e,t){var n=e.team1.toString(),a=e.team2.toString();t.lineWidth=2,t.strokeStyle="white",t.font="25px Arial",t.strokeText(n,375,200),t.strokeText(a,375,500)}},{key:"render",value:function(){var e=this;this.renderDefaultBoard().then(function(){var t=Object(T.a)(O.a.mark((function t(n){var a,r,i,o,s,m;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.game.rounds,r=l(e.game),i=r.team1.team.name,o=r.team2.team.name,s={team1:0,team2:0},m={oneT:0,oneM:0,oneB:0,twoT:0,twoM:0,twoB:0},t.next=8,a.forEach((function(t){for(var a=t.pointsPerTeamPerRound,r=0,c=0,u=0;u<2;u++){var l=a[u].team.name,d=a[u].points;l===i?r=d:l===o&&(c=d)}s=e.drawPoints(r,c,s,n,m)}));case 8:e.drawRest(s,n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),e}(),S=[{id:"asdfjewr",rounds:[{pointsPerTeamPerRound:[{points:190,wiisPoints:30,team:{id:0,name:"team1"}},{points:57,wiisPoints:0,team:{id:1,name:"team2"}}],trump:{multiplier:3,name:"Trumpf"}},{pointsPerTeamPerRound:[{points:221,wiisPoints:250,team:{id:0,name:"team1"}},{points:57,wiisPoints:20,team:{id:1,name:"team2"}}],trump:{multiplier:3,name:"Trumpf"}},{pointsPerTeamPerRound:[{points:520,wiisPoints:45,team:{id:0,name:"team1"}},{points:57,wiisPoints:0,team:{id:1,name:"team2"}}],trump:{multiplier:3,name:"Trumpf"}},{pointsPerTeamPerRound:[{points:290,wiisPoints:40,team:{id:0,name:"team1"}},{points:0,wiisPoints:100,team:{id:1,name:"team2"}}],trump:{multiplier:2,name:"Anderer Trumpf"}}]},{id:"56",rounds:[{pointsPerTeamPerRound:[{points:0,wiisPoints:0,team:{id:0,name:"someteamname"}},{points:0,wiisPoints:0,team:{id:1,name:"someotherteamname"}}],trump:{multiplier:3,name:"Trumpf"}}]},{id:"game2",rounds:[{pointsPerTeamPerRound:[{points:100,wiisPoints:100,team:{id:0,name:"someteamname"}},{points:57,wiisPoints:0,team:{id:1,name:"someotherteamname"}}],trump:{multiplier:3,name:"Trumpf"}},{pointsPerTeamPerRound:[{points:257,wiisPoints:0,team:{id:3,name:"someteamname"}},{points:0,wiisPoints:100,team:{id:5,name:"someotherteamname"}}],trump:{multiplier:2,name:"Anderer Trumpf"}}]}],y=n(53),R=n.n(y);var M=function(e){var t=Object(a.useRef)(null),n=S[0];return Object(a.useEffect)((function(){new x(t,n,R.a).render()})),a.createElement(f,null,a.createElement("h1",null,e.match.params.id),a.createElement("canvas",{ref:t,width:515,height:720}))},C=n(54),B=n(126),I=n(122),N=n(129),W=n(130),D=n(127),G=Object(I.a)((function(e){return Object(N.a)({root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}})})),A=Object(W.a)(),J="Spiel wurde nicht erstellt, bitte versuchen sie es erneut.",V="Momentant k\xf6nnen keine Spiele erstellt werden, bitte versuchen sie es sp\xe4ter erneut.",F="Ein Teamname muss aus Buchstaben und Zahlen bestehen.";var L=function(){var e=RegExp("^[\\w\\d]{1,20}$"),t=Object(a.useState)(!0),n=Object(c.a)(t,2),i=n[0],o=n[1],s=G(),u={show:!1,message:""},l=Object(a.useState)({}),h=Object(c.a)(l,2),b=h[0],v=h[1],w=Object(a.useState)({}),E=Object(c.a)(w,2),g=E[0],j=E[1],P=Object(a.useState)(!1),k=Object(c.a)(P,2),x=k[0],S=k[1],y=Object(a.useState)(!1),R=Object(c.a)(y,2),M=R[0],I=R[1],N=Object(a.useState)(u),W=Object(c.a)(N,2),L=W[0],U=W[1],Z=Object(a.useState)(u),$=Object(c.a)(Z,2),q=$[0],z=$[1],H=Object(a.useState)(!1),K=Object(c.a)(H,2),Q=K[0],X=K[1],Y=Object(a.useState)(!1),_=Object(c.a)(Y,2),ee=_[0],te=_[1],ne=Object(a.useState)(u),ae=Object(c.a)(ne,2),re=ae[0],ie=ae[1],oe=Object(a.useState)([]),se=Object(c.a)(oe,2),me=se[0],ce=se[1],ue=Object(a.useState)({show:!1,message:""}),le=Object(c.a)(ue,2),de=le[0],pe=le[1],fe=Object(a.useState)(),he=Object(c.a)(fe,2),be=he[0],ve=he[1];Object(a.useEffect)((function(){fetch("/api/v1/team",{method:"GET"}).then((function(e){if(!e.ok)throw o(!1),new Error(V);e.json().then((function(e){ce(e),pe({message:"",show:!1}),o(!1)}))})).catch((function(e){pe({show:!0,message:e.message,error:e})}))}),[ce,pe,o]);var we=function(){var e=Object(T.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/game",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",Promise.resolve(a.id));case 10:throw new Error(J);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e,t,n,a,r){var i=!1;return t.test(e)?n(a()):(n(r()),i=!0),!i},ge=function(){v({}),j({}),U(u),z(u),ie(u)},je=function(){var e=Object(T.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/v1/team",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});case 2:if(!(n=e.sent).ok){e.next=10;break}return e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",Promise.resolve(a.id));case 10:throw new Error("Team wurde nicht erstellt, bitte versuchen sie es erneut!");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(T.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id&&0!==t.id||!t.id.toString()){e.next=4;break}n(t),e.next=13;break;case 4:return e.next=6,je(t.name);case 6:if(!(a=e.sent)){e.next=12;break}t.id=a,n(t),e.next=13;break;case 12:return e.abrupt("return",Promise.reject("Team nicht erstellt!"));case 13:return e.abrupt("return",Promise.resolve());case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Te=function(e,t){var n=A(e,t);return""!==t.inputValue&&n.push({id:t.id,name:t.inputValue,title:'Add "'.concat(t.inputValue,'"')}),n},Pe=function(e){return"string"===typeof e?e:e.name},ke=function(e){return e.title?e.title:e.name};return r.a.createElement(f,null,r.a.createElement(r.a.Fragment,null,de?i?r.a.createElement(p.a,null):be?r.a.createElement(m.a,{to:"/game/"+be}):r.a.createElement("form",{className:s.root},r.a.createElement("h1",null,"Create Game"),r.a.createElement(D.a,{value:b,loading:Q,onChange:function(t,n){if(n&&n.name)return X(!0),a=n.name,void(Ee(a,e,U,(function(){return{message:"",show:!1}}),(function(){return{show:!0,message:F}}))?Oe(n,v).then((function(){X(!1),S(!0)})).catch((function(e){ie({show:!0,message:e.message,error:e})})):S(!1));var a;S(!1)},filterOptions:Te,id:"free-solo-with-text-demo",options:me,getOptionLabel:Pe,renderOption:ke,style:{width:300},freeSolo:!0,renderInput:function(e){return r.a.createElement(B.a,Object.assign({error:L.show,helperText:L.message},e,{label:"Team 1",variant:"outlined"}))}}),r.a.createElement(D.a,{value:g,loading:ee,onChange:function(t,n){if(n&&n.name)return te(!0),a=n.name,void(Ee(a,e,z,(function(){return Object(C.a)({},q,{show:!1})}),(function(){return{show:!0,message:F}}))?Oe(n,j).then((function(){te(!1),I(!0)})).catch((function(e){ie({show:!0,message:e.message,error:e})})):I(!1));var a;I(!1)},filterOptions:Te,id:"free-solo-with-text-demo",options:me,getOptionLabel:Pe,renderOption:ke,style:{width:300},freeSolo:!0,renderInput:function(e){return r.a.createElement(B.a,Object.assign({error:q.show,helperText:q.message},e,{label:"Team 2",variant:"outlined"}))}}),r.a.createElement(d.a,{disabled:!x||!M,onClick:function(){(b.id||0===b.id)&&b.id.toString()&&(g.id||0===g.id)&&g.id.toString()&&b.id!==g.id?we({teams:[b,g]}).then((function(e){ge(),ve(e)})).catch((function(e){ge(),ie({show:!0,message:e.message,error:e})})):ie({show:!0,message:J})}},"Create"),r.a.createElement(d.a,{onClick:ge},"Reset"),r.a.createElement("p",null,re.show&&re.message)):r.a.createElement("p",null,V)))};var U=function(){return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(E.a,{position:"static"},r.a.createElement(g.a,null,r.a.createElement(d.a,{"aria-label":"menu"},r.a.createElement(s.b,{to:"/"},"Dashboard")),r.a.createElement(d.a,{"aria-label":"menu"},r.a.createElement(s.b,{to:"/users"},"Users")))),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/users"},r.a.createElement(w,null)),r.a.createElement(m.b,{path:"/game/create"},r.a.createElement(L,null)),r.a.createElement(m.b,{path:"/game/:id",render:function(e){return r.a.createElement(M,e)}}),r.a.createElement(m.b,{path:"/"},r.a.createElement(v,null)))))};o.a.render(r.a.createElement(U,null),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.eb21ec7c.chunk.js.map